import{j as u,A as i,B as p}from"./app-2c444acf.js";import{a as t}from"./index-1dd2f180.js";function k(){const a=u([]),n=i(),l=p(),c=u(!1),s=u(!1);return{errors:a,loading:s,isFinish:c,logout:async()=>{a.value=[],s.value=!0,await t.post("/logout").then(r=>{window.localStorage.removeItem("tokenUser"),window.localStorage.removeItem("user"),s.value=!1,location.href="/"}).catch(r=>{s.value=!1,a.value.push(r.response.data.message)})},createUser:async r=>{a.value=[],s.value=!0,await t.post("/register",r).then(e=>{c.value=!0,s.value=!1}).catch(e=>{if(s.value=!1,e.response.status==422)for(const o in e.response.data.errors)a.value.push(e.response.data.errors[o][0]);else a.value.push(e.response.data.message);n.replace({name:l.name,hash:"#errors"})})},loginUser:async r=>{a.value=[],s.value=!0,await t.post("/login",r).then(e=>{localStorage.user=JSON.stringify(e.data.data.user),localStorage.tokenUser=e.data.data.token,s.value=!1}).catch(e=>{if(s.value=!1,e.response.status==422)for(const o in e.response.data.errors)a.value.push(e.response.data.errors[o][0]);else a.value.push(e.response.data.message);n.replace({name:l.name,hash:"#errors"})})},loginAdmin:async r=>{a.value=[],s.value=!0,await t.post("/login-admin",r).then(e=>{localStorage.user=JSON.stringify(e.data.data.user),localStorage.tokenUser=e.data.data.token,s.value=!1}).catch(e=>{if(s.value=!1,e.response.status==422)for(const o in e.response.data.errors)a.value.push(e.response.data.errors[o][0]);else a.value.push(e.response.data.message);n.replace({name:l.name,hash:"#errors"})})},cleanErrors:()=>{a.value=[]}}}export{k as u};
