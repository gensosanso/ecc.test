import{x as U,o as w,c as _,d as o,t as h,n as v,j as c,A as S,B as A,M as g}from"./app-2c444acf.js";import{a as m}from"./index-1dd2f180.js";const $={class:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},j={class:"fixed inset-0 z-10 overflow-y-auto"},q={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},z={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},D={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},E={class:"sm:flex sm:items-start"},T={class:v("mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10")},M={class:v("h-6 w-6 text-red-600"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},N=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1),R=[N],F={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},P={class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"},V={class:"mt-2"},I={class:"text-sm text-gray-500"},J={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},x=U({__name:"ConfirmModal",props:{question:{type:String,default:""},title:{type:String,default:""},confirmLabel:{type:String,default:""},cancelLabel:{type:String,default:""},modalType:{type:String,default:"Warning"}},emits:["confirm","cancel"],setup(s,{emit:l}){const r=s;return(i,u)=>(w(),_("div",$,[o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:u[0]||(u[0]=d=>l("cancel"))}),o("div",j,[o("div",q,[o("div",z,[o("div",D,[o("div",E,[o("div",T,[(w(),_("svg",M,R))]),o("div",F,[o("h3",P,h(r.title),1),o("div",V,[o("p",I,h(r.question),1)])])])]),o("div",J,[o("button",{onClick:u[1]||(u[1]=d=>l("confirm")),type:"button",class:v("mt-3 inline-flex w-full justify-center rounded-md border  bg-red-500 px-4 py-2 text-base font-medium text-white shadow-sm  sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm")},h(r.confirmLabel),1),o("button",{onClick:u[2]||(u[2]=d=>l("cancel")),type:"button",class:v("inline-flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-base font-medium text-gray-700  shadow-sm  focus:outline-none  sm:ml-3 sm:w-auto sm:text-sm")},h(r.cancelLabel),1)])])])])]))}});function Y(){const s=c([]),l=S(),r=A(),i=c(!1),u=c(!1),d=c([]),b=c([]),y=c([]),C=c("username"),k=c(""),L=[{text:"Avatar",value:"avatar"},{text:"Name",value:"username"},{text:"Phone",value:"phone_number"},{text:"Email",value:"email"},{text:"Role",value:"user_type"},{text:"Confirmed",value:"confirmed"},{text:"Blocked",value:"blocked"},{text:"Action",value:"id"}],B=()=>{s.value=[]},f=async()=>{s.value=[],i.value=!0,await m.get("/users").then(t=>{d.value=t.data.data}).catch(t=>{if(i.value=!1,t.response.status==422)for(const a in t.response.data.errors)s.value.push(t.response.data.errors[a][0]);else s.value.push(t.response.data.message);l.replace({name:r.name,hash:"#errors"})})};return{users:d,user:b,selectArray:y,searchField:C,searchValue:k,headers:L,errors:s,getUsers:f,isFinish:u,getUser:async t=>{s.value=[],i.value=!0,await m.get(`/users/${t}`).then(a=>{b.value=a.data.data}).catch(a=>{if(i.value=!1,a.response.status==422)for(const n in a.response.data.errors)s.value.push(a.response.data.errors[n][0]);else s.value.push(a.response.data.message);l.replace({name:r.name,hash:"#errors"})})},cleanErrors:B,deleteUsers:async()=>{if(y.value.length!=0){const t=c([]);y.value.forEach(e=>{t.value.push(e.id)});const{reveal:a,onConfirm:n}=g(x,{question:"Are you sure you want to delete its item(s)? All data will be permanently deleted. This action cannot be undone.",title:"Delete User !!!",confirmLabel:"Delete",cancelLabel:"Cancel"});n(async()=>{await m.delete(`/users/${JSON.stringify({...t.value})}`).then(e=>{f()}).catch(e=>{if(i.value=!1,e.response.status==422)for(const p in e.response.data.errors)s.value.push(e.response.data.errors[p][0]);else s.value.push(e.response.data.message);l.replace({name:r.name,hash:"#errors"})})}),a()}},confirmedUser:async t=>{const{reveal:a,onConfirm:n}=g(x,{question:"Are you sure you want to Change Confirmed its item(s)? ",title:"Change Confirmed Status!!!",confirmLabel:"Change Confirmed",cancelLabel:"Cancel"});n(async()=>{await m.put(`/users/confirmed/${t}`).then(e=>{f()}).catch(e=>{if(i.value=!1,e.response.status==422)for(const p in e.response.data.errors)s.value.push(e.response.data.errors[p][0]);else s.value.push(e.response.data.message);l.replace({name:r.name,hash:"#errors"})})}),a()},toogleBlocked:async t=>{const{reveal:a,onConfirm:n}=g(x,{question:"Are you sure you want to Change Blocked Status of its item(s)? ",title:"Change Blocked Status !!!",confirmLabel:"Change Blocked",cancelLabel:"Cancel"});n(async()=>{await m.put(`/users/toogle-blocked/${t}`).then(e=>{f()}).catch(e=>{if(i.value=!1,e.response.status==422)for(const p in e.response.data.errors)s.value.push(e.response.data.errors[p][0]);else s.value.push(e.response.data.message);l.replace({name:r.name,hash:"#errors"})})}),a()},getUserType:async(t,a)=>{s.value=[],i.value=!0,await m.post(`/users/type/${t}`,{officialParish:a}).then(n=>{d.value=n.data.data}).catch(n=>{if(i.value=!1,n.response.status==422)for(const e in n.response.data.errors)s.value.push(n.response.data.errors[e][0]);else s.value.push(n.response.data.message);l.replace({name:r.name,hash:"#errors"})})}}}export{Y as u};
